{% extends 'base.html' %} {% load static %}{% block title %} Home{% endblock title %} {% block body %}
<style>
    .avatar {
        vertical-align: middle;
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
    }
    
    .checked {
        color: orange;
    }
    
    .centerpro {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 60%;
    }
</style>
<div class="container">
    <div class="jumbotron my-3">
        <h1 class="display-4">Welcome to iCoder!</h1>
        <p class="lead" style="color: red;">This is a mini blog project for final year Software engineering course created by Shivraj Rathore,Siddharth Damor and Harsh Kumar using Front end technologies HTML,CSS,Javascript and Backend Django Framework.</p>
        <hr class="my-4">
        <p>It uses utility classes for typography and spacing to space content out within the larger container.</p>
        <a class="btn btn-primary btn-lg" href="/blog" role="button">Go to Blog</a>
    </div>
    {% if posts %}
    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100" src="{% static 'home/img/thumbnail.jpg' %}" style="height:500px;" alt="Featured blogs">
                <div class="carousel-caption">
                    <h1 style="color: red;">Featured blogs</h1>
                </div>
            </div>
            {% for post in posts %}
            <div class="carousel-item">
                <img class="d-block w-100" src="{% static 'home/img/thumbnail.jpg' %}" style="height:500px;" alt="{{post.title|safe}}">
                <div class="carousel-caption">
                    <h3 style="color: red;">Article by {{post.author|safe}}</h3>
                    <h4 style="color: purple;">{{post.title|safe|truncatechars:40}}</h4>
                    <h4 style="color: turquoise;">Posted on: {{post.timeStamp}}</h4>
                </div>
            </div>
            {% endfor %}
        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>{% endif %}
</div>
<div class="container mb-5 mt-5">
    {% if rates %}
    <span style="color: blueviolet;font-size: 25px;">Feedback({{avg_rate.avg|floatformat}}/5)</span> {% ifequal avg_rate.avg|floatformat:'0' '1' %}
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span> {% endifequal %} {% ifequal avg_rate.avg|floatformat:'0' '2' %}
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span> {% endifequal %} {% ifequal avg_rate.avg|floatformat:'0' '3' %}
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span> {% endifequal %} {% ifequal avg_rate.avg|floatformat:'0' '4' %}
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span> {% endifequal %} {% ifequal avg_rate.avg|floatformat:'0' '5' %}
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
    <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span> {% endifequal %}
    <h5 class="text-muted pt-2">Reviews: {{total_review}}</h5>
    {% for rate in rates %}
    <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 my-4 position-relative bg-info">
        <div class="col p-4 d-flex flex-column position-static">
            <strong class="d-inline-block mb-2 text-primary mb-3"><span style="text-decoration:none;color:red;">{{rate.user|safe}}</span></strong>
            <div class="my-2">
                {% ifequal rate.rate 1 %}
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span> {% endifequal %} {% ifequal rate.rate 2 %}
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span> {% endifequal %} {% ifequal rate.rate 3 %}
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span> {% endifequal %} {% ifequal rate.rate 4 %}
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span> {% endifequal %} {% ifequal rate.rate 5 %}
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span>
                <span><i class="fa-solid fa-high-definition fa fa-star checked"></i></span> {% endifequal %}
            </div>
            <p>{{rate.comment}}</p>
            <div class="mb-2 text-muted">Posted on: <span style="color: seagreen;">{{rate.created_at}}</span></div>
            {% ifequal rate.user request.user %}
            <div class="my-2">
                <a href="/editrateus" class="btn btn-primary btn-sm">Edit Review</a>
            </div>
            {% endifequal %}
        </div>
    </div>{% endfor %}
    <hr> {% endif %} {% if posts %}
    <h2 style="color: greenyellow;">Popular Blogposts</h2>
    {% for post in posts %}
    <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 my-4 position-relative" style="background-color:violet">
        <div class="col p-4 d-flex flex-column position-static">
            <strong class="d-inline-block mb-2 text-primary mb-3">Article  by <a style="text-decoration:none;color:red;" href="searchpeople/{{post.author}}">{{post.author|safe}}</a></strong>
            <h3 class="mb-3">
                Title: <span style="color: red;">{{post.title|safe}}</span>
            </h3>
            <div class="mb-2 text-muted">Posted on: <span style="color: seagreen;">{{post.timeStamp}}</span></div>
            <p class="mb-2 text-muted">Description: </p><span>{{post.slug|safe}}</span>
            <!--<p class="card-text mb-auto">{{post.content|safe| truncatechars:200}}</p>-->
            <div class="my-2">
                <a href="/blog/view/{{post.sno}}" role="button" class="btn btn-primary">Continue reading</a>
            </div>{% ifequal request.user.username post.author %}
            <div class="inlin-flex">
                <a href="/blog/view/edit/{{post.sno}}" class="btn btn-success btn-sm">Edit</a>
                <a href="#" class="btn btn-danger btn-sm remove-blog" pid={{post.sno}}>Delete</a>
            </div>{% endifequal %}
        </div>
        <div class="col-auto d-none d-lg-block">
            <object data="{% static 'home/img/thumbnail.jpg' %}" width="200" height="250"> </object>
        </div>
    </div><br><br> {% endfor %}
    <hr> {% endif %} {% if users %}
    <h2 style="color: greenyellow;">Trending bloggers</h2><br>
    <div class="row py-2">
        {% for p in users reversed %}
        <div class="col-sm-4 mt-2">
            <div class="card-body text-center">{% if imgs %} {% for img in imgs reversed %}
                <a href="/searchpeople/{{p.username}}">{% ifnotequal img.user p.username %}
                    <!-- continue -->{% else %}
                    <img src="{{img.photo.url}}" class="avatar">
                    {% endifnotequal %}
                    </a>{% endfor %}{% endif %}
                <a href="/searchpeople/{{p.username}}" style="text-decoration: none;">
                    <h3 class="pt-2" style="color: yellow;">{{p.username|safe}}</h3>
                </a>
            </div>
        </div><br><br> {% endfor %}
    </div>
    <hr> {% endif %} {% if suggestedbloggers %}
    <h2 style="color: greenyellow;">Bloggers you may like</h2><br>
    <div class="row py-2">
        {% for p in suggestedbloggers reversed %}
        <div class="col-sm-4 mt-2">
            <div class="card-body text-center">{% if imgs %} {% for img in imgs reversed %}
                <a href="/searchpeople/{{p.username}}">{% ifnotequal img.user p.username %}
                    <!-- continue -->{% else %}
                    <img src="{{img.photo.url}}" class="avatar">
                    {% endifnotequal %}
                    </a>{% endfor %}{% endif %}
                <a href="/searchpeople/{{p.username}}" style="text-decoration: none;">
                    <h3 class="pt-2" style="color: yellow;">{{p.username|safe}}</h3>
                </a>
            </div>
        </div><br><br> {% endfor %}
    </div>
    <hr> {% endif %}


    <h2 class="mt-5" style="color: greenyellow;">Feed</h2>
    {% if allPosts %} {% for post in allPosts %}
    <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 my-4 position-relative" style="background-color: violet;">
        <div class="col p-4 d-flex flex-column position-static">
            <strong class="d-inline-block mb-2 text-primary mb-3">Article  by <a style="text-decoration:none;color:red;" href="searchpeople/{{post.author}}">{{post.author|safe}}</a></strong>
            <h3 class="mb-3">
                Title: <span style="color: red;">{{post.title|safe}}</span>
            </h3>
            <div class="mb-2 text-muted">Posted on: <span style="color: seagreen;">{{post.timeStamp}}</span></div>
            <p class="mb-2 text-muted">Description: </p><span>{{post.slug|safe}}</span>
            <div class="my-2">
                <a href="/blog/view/{{post.sno}}" role="button" class="btn btn-primary">Continue reading</a>
            </div>
            {% ifequal request.user.username post.author %}
            <div class="inlin-flex">
                <a href="/blog/view/edit/{{post.sno}}" class="btn btn-success btn-sm">Edit</a>
                <a href="#" class="btn btn-danger btn-sm remove-blog" pid={{post.sno}}>Delete</a>
            </div>{% endifequal %}
        </div>
        <div class="col-auto d-none d-lg-block">
            <object data="{% static 'home/img/thumbnail.jpg' %}" width="200" height="250"> </object>
        </div>
    </div><br><br> {% endfor %} {% else %}
    <br>
    <img src="{% static 'home/img/emptymessage.gif' %}" class="centerpro homeimg mt-5"> {% endif %}


</div>
<script>
    $('.remove-blog').click(function(e) {
        e.preventDefault();
        var post_id = $(this).attr("pid").toString();
        var eml = this
        $.ajax({
            type: "GET",
            url: "/blog/view/delete",
            data: {
                post_id: post_id
            },
            success: function(data) {
                eml.parentNode.parentNode.parentNode.remove()
            }
        })
    })
</script>

{% endblock %}